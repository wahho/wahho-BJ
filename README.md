# wahho-BJ
/div Ruby勉強会のレポジトリ

### シャッフル
* まずシャッフルをする。(いったんは省略)

### ベット
* Place your bet. (賭けてください)
* ベット額を入力
* No more bet. (終了です)

### 初期のカードを配る
* ディーラーから見て左から順に1枚目のカードを表向きで配る。
* ディーラーの1枚目のカードを裏向きで配る。
* ディーラーから見て左から順に2枚目のカードを表向きで配る。
* ディーラーの2枚目のカードを裏向きで配る。
* ディーラーの1枚目のカードを表向きにする。

### 初期カードに対する役判定
* ディーラーのアップ(表)カードがT-Aならブラックジャックかどうか判定する。
    * ディーラーがブラックジャックなら、ブラックジャックのプレイヤーは引き分け、その他のプレイヤーの掛け金を回収し次のゲームへ。
* ディーラーがブラックジャックではなく、ブラックジャックのプレイヤーには1.5倍のチップを渡しカードを回収する(2.5倍配当)。

### プレイヤーアクション
* ディーラーから見て左のプレイヤーから順にアクションする。
* プレイヤーに行動を聞く。
    * S = スタンド , H = ヒット , DD = ダブルダウン , SP = スプリット , SU = サレンダー
* S : スタンド(追加カード不必要のアクション)が示されたら次のプレイヤーへ。
* H : ヒット、1枚のカードを表向きに配り次のアクションを聞く。
* DD : ダブルダウン、自分が有利だと思ったときに掛け金を倍まで増やせる。
    * オリジナルベットと同じ額までの掛け金をプレイヤーから見て左側に近づけて置く、1枚のカードを表向きに配り次のプレイヤーへ。
* SP : スプリット、1枚目と2枚目のカードが同じの場合に2つのハンドで勝負する。
    * オリジナルベットと同じ額の掛け金をプレイヤーから見て左側に離して置く(ダブルダウンで無いことを示すためVサインを出す場合も多い)。
    * 2枚目のカードをディーラーから見て右に置き、1枚目のカードに対し追加カードを表向きに配る。
    * 1枚目のカード＋追加カードに対し行動を聞き、スタンド or ダブルダウンをしたら2枚目のカードへいく。
    * スプリットに対してさらにスプリットも可能。
* SU = サレンダー、掛け金の半分を回収し、その後カードも回収し次のプレイヤーへ。
* カードを配ったとき、合計が22以上(バースト)なら直ちに掛け金とカードを回収し、次のプレイヤーへ。
    * 当然バーストの処理は全てのAを1として数えて22以上になった時のみ。
    * プレイヤーとディーラーの両バーストは全てプレイヤーの負け。

### ディーラーアクション

* DEALER MUST STAND ON 17 AND DRAW TO 16 (と台に書いてある)
* ディーラーの2枚目のカードを表向きにする。
* ディーラーのカードの合計が17未満なら、17以上になるまでカードを表向きに配る。
    * Aを11として数えたときの17以上21以下も追加のカードは配らない。

### 配当
* ディーラーから見て右側から処理をする
* プレイヤーの合計が22以上 : (既にカードも掛け金も無いはず)
* ディーラーが22以上でプレイヤーが21未満 : 掛け金と同額のチップを渡す(2倍配当)。
* ディーラーが17以上21以下でプレイヤーが同値の場合 : 引き分けなのでそのまま。
* ディーラーの合計 < プレイヤーの合計 < 22の場合 : 掛け金を回収する。

### ゲーム終了の処理

* プレイヤーのカードを回収し続いてディーラーのカードも回収し、裏向きにしてディスカードホルダーへ。
* ディーリング・シューのカードが少なくなってきたら再度シャッフルをする。

-----

### 注釈
* インシュアランスやイーブンマネーは控除率が高く使わないので省略
