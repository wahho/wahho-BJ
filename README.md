# wahho-BJ
/div Ruby勉強会のレポジトリ

### 初期化
* プレイヤーはチップを購入して席につく。
* トランプを使用するデッキ数だけ開封し、テーブルの上に広げる。
    * 前のゲームのカードを覚え戦術を変化させるのを防ぐために6か8デッキ使うのが基本。
* 各デッキにはクラブの3が2枚あるはずなので片方を破る。

### シャッフル
* まずシャッフルをする。(いったんは省略)

### ベット
* Place your bet. (賭けてください)
* ベット額を入力。
* No more bet. (終了です)
* ベット額が下限から上限の間か確かめる。
    * またデノミ額の大きいチップを下に置く。

### 初期のカードを配る
* ディーラーから見て左のプレイヤーから順に1枚目のカードを表向きで配る。
* ディーラーの1枚目のカードを裏向きで配る。
* ディーラーから見て左のプレイヤーから順に2枚目のカードを表向きで配る。
* ディーラーの2枚目のカードを裏向きで配る。
* ディーラーの1枚目のカードを表向きにする。

### 初期カードに対する役判定
* ディーラーのアップ(表)カードがTからAならブラックジャックかどうか判定する。
    * ホール(裏)カードはブラックジャックの時のみ公開される。
    * ディーラーがブラックジャックなら、ブラックジャックのプレイヤーは引き分け、その他のプレイヤーの掛け金を回収し次のゲームへ。
* ディーラーがブラックジャックではなく、ブラックジャックのプレイヤーには1.5倍のチップを渡しカードを回収する(2.5倍配当)。

### プレイヤーアクション
* ディーラーから見て左のプレイヤーから順にアクションする。
* プレイヤーに行動を聞く。
    * S = スタンド , H = ヒット , DD = ダブルダウン , SP = スプリット , SU = サレンダー
* S : スタンド(追加カード不必要のアクション)が示されたら次のプレイヤーへ。
* H : ヒット、1枚のカードを表向きに配り、バーストしていなければ再びアクションを聞く。
* DD : ダブルダウン、自分が有利だと思ったときに掛け金を倍まで増やせる。
    * オリジナルベットと同じ額までの掛け金をプレイヤーから見て左側に近づけて置く、1枚のカードを表向きに配り次のプレイヤーへ。
    * 戦術的に意味が無いが、ダブルダウンの掛け金は少なくても良い。
* SP : スプリット、1枚目と2枚目のカードが同じの場合に2つのハンドで勝負する。
    * (処理が多いので後回しで良い)
    * オリジナルベットと同じ額の掛け金をプレイヤーから見て左側に離して置く(ダブルダウンで無いことを示すためVサインを出す場合も多い)。
    * 2枚目のカードをディーラーから見て右に置き、1枚目のカードに対し追加カードを表向きに配る。
    * 1枚目のカード＋追加カードに対し行動を聞き、スタンド or ダブルダウンをしたら2枚目のカードへいく。
    * スプリットに対してさらにスプリットも可能。
    * スプリットの掛け金はオリジナルベットと同額が必須。
* SU = サレンダー、掛け金の半分を回収し、その後カードも回収し次のプレイヤーへ。
* カードを配ったとき、合計が22以上(バースト)なら直ちに掛け金とカードを回収し、次のプレイヤーへ。
    * バーストの処理は全てのAを1として数えて22以上になった時のみ。
    * プレイヤーとディーラーの両バーストは全てプレイヤーの負け。

### ディーラーアクション

* DEALER MUST STAND ON 17 AND DRAW TO 16 (と台に書いてある)
* ディーラーの2枚目のカードを表向きにする。
* ディーラーのカードの合計が17未満なら、17以上になるまでカードを表向きに配る。
    * Aを11として数えたときの17以上21以下も追加のカードは配らない。

### 配当
* ディーラーから見て右側から処理をする
* プレイヤーの合計が22以上 : (既にカードも掛け金も無いはず)
* ディーラーが22以上でプレイヤーが21以下 : 掛け金と同額のチップを渡す(2倍配当)。
* 双方21以下でディーラーの合計 < プレイヤーの合計 : 掛け金と同額のチップを渡す(2倍配当)。
* 双方21以下でディーラーの合計とプレイヤーの合計が同値 : 引き分けなのでそのまま。
* 双方21以下でディーラーの合計 > プレイヤーの合計 : 掛け金を回収する。

### ゲーム終了の処理

* プレイヤーのカードを回収し続いてディーラーのカードも回収し、裏向きにしてディスカードホルダーへ。
* ディーリング・シューのカード枚数が少なくなってきたら再度シャッフルをする。
    * 6や8デッキのゲームの場合、残りが四分の一を切った所でシャッフルをする。

-----

### 注釈
* プレイヤーアクションの内、インシュアランスやイーブンマネーは控除率が高く使わないので省略。
* トランプのカードをテキストで表すとき、ランクについて数字 or 大文字一文字で、スートは小文字で表記する。
    * A = Ace(1) , T = Ten(10) , J = Jack(11) , Q = Queen(12) , K = King(13)
    * s = spade , h = heart , d = diamond , c = club
    * AsJc のように表記する。(例はスペードのエースとクラブのジャックを表す)

### カードの点数
* A : 11点か1点の好きな方。
* T , J , Q , K : 全て10点
* 2から9 : カードの点数そのまま。

### 重要事項
* 機械化が進んでいないカジノテーブルにおける手順を示したため、必ずしも全てを実装しなくてもよい。
